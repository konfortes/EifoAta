{"changed":true,"filter":false,"title":"APIServvice.js","tooltip":"/public/js/services/APIServvice.js","value":"(function() {\n    var app = angular.module(\"EifoAta\");\n    app.factory(\"API\", function($http, Session) {\n        var APIService = {};\n\n        APIService.loginUser = function(userName, password, rememberMe) {\n            var loginUrl = \"https://eifoata-c9-konfortes.c9.io/api/login/loginUser?userName=\" + userName + \"&password=\" + password;\n            return $http.get(loginUrl).then(function(res) {\n                if (res.data.success && res.data.user) {\n                    Session.create(res.data.id, res.data.user._id, res.data.user.role);\n                    return res.data;\n                }\n                else{\n                    return {error : 'authentication error'};\n                }\n            });\n        };\n\n        return APIService;\n    });\n}());","undoManager":{"mark":-1,"position":15,"stack":[[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":0,"column":0},"end":{"row":0,"column":13}},"text":"(function() {"},{"action":"insertText","range":{"start":{"row":0,"column":13},"end":{"row":1,"column":0}},"text":"\n"},{"action":"insertLines","range":{"start":{"row":1,"column":0},"end":{"row":29,"column":0}},"lines":["    var app = angular.module(\"EifoAta\");","    app.factory(\"Auth\", function($http, Session) {","        var authService = {};","","        authService.loginUser = function(userName, password, rememberMe) {","            var loginUrl = \"https://eifoata-c9-konfortes.c9.io/api/login/loginUser?userName=\" + userName + \"&password=\" + password;","            return $http.get(loginUrl).then(function(res) {","                if (res.data.success && res.data.user) {","                    Session.create(res.data.id, res.data.user._id, res.data.user.role);","                    return res.data;","                }","                else{","                    return {error : 'authentication error'};","                }","            });","        };","        authService.isAuthenticated = function() {","            return !!Session.userId;","        };","        authService.isAuthorized = function(authorizedRoles) {","            if (!angular.isArray(authorizedRoles)) {","                authorizedRoles = [authorizedRoles];","            }","            return (authService.isAuthenticated() && authorizedRoles.indexOf(Session.userRole) !== -1);","        };","","        return authService;","    });"]},{"action":"insertText","range":{"start":{"row":29,"column":0},"end":{"row":29,"column":5}},"text":"}());"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":2,"column":17},"end":{"row":2,"column":21}},"text":"Auth"},{"action":"insertText","range":{"start":{"row":2,"column":17},"end":{"row":2,"column":18}},"text":"A"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":18},"end":{"row":2,"column":19}},"text":"P"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":2,"column":19},"end":{"row":2,"column":20}},"text":"I"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":3,"column":12},"end":{"row":3,"column":16}},"text":"auth"},{"action":"insertText","range":{"start":{"row":3,"column":12},"end":{"row":3,"column":13}},"text":"A"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":3,"column":13},"end":{"row":3,"column":14}},"text":"P"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":3,"column":14},"end":{"row":3,"column":15}},"text":"I"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":5,"column":8},"end":{"row":5,"column":19}},"text":"authService"},{"action":"insertText","range":{"start":{"row":5,"column":8},"end":{"row":5,"column":18}},"text":"APIService"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":17,"column":8},"end":{"row":17,"column":19}},"text":"authService"},{"action":"insertText","range":{"start":{"row":17,"column":8},"end":{"row":17,"column":18}},"text":"APIService"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":20,"column":8},"end":{"row":20,"column":19}},"text":"authService"},{"action":"insertText","range":{"start":{"row":20,"column":8},"end":{"row":20,"column":18}},"text":"APIService"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":27,"column":15},"end":{"row":27,"column":26}},"text":"authService"},{"action":"insertText","range":{"start":{"row":27,"column":15},"end":{"row":27,"column":25}},"text":"APIService"}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":24,"column":20},"end":{"row":24,"column":31}},"text":"authService"},{"action":"insertText","range":{"start":{"row":24,"column":20},"end":{"row":24,"column":30}},"text":"APIService"}]}],[{"group":"doc","deltas":[{"action":"insertText","range":{"start":{"row":4,"column":0},"end":{"row":5,"column":0}},"text":"\n"}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":4,"column":0},"end":{"row":5,"column":0}},"nl":"\n","lines":[""]}]}],[{"group":"doc","deltas":[{"action":"removeText","range":{"start":{"row":25,"column":0},"end":{"row":25,"column":10}},"text":"        };"},{"action":"removeLines","range":{"start":{"row":17,"column":0},"end":{"row":25,"column":0}},"nl":"\n","lines":["        APIService.isAuthenticated = function() {","            return !!Session.userId;","        };","        APIService.isAuthorized = function(authorizedRoles) {","            if (!angular.isArray(authorizedRoles)) {","                authorizedRoles = [authorizedRoles];","            }","            return (APIService.isAuthenticated() && authorizedRoles.indexOf(Session.userRole) !== -1);"]}]}],[{"group":"doc","deltas":[{"action":"removeLines","range":{"start":{"row":17,"column":0},"end":{"row":18,"column":0}},"nl":"\n","lines":[""]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":7,"column":59},"end":{"row":7,"column":59},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1405667110726}